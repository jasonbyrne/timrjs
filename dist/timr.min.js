(function(){"use strict";if(typeof Object.assign!="function"){Object.assign=function(t){if(t===undefined||t===null){throw new TypeError("Cannot convert undefined or null to object")}var r=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n!==undefined&&n!==null){for(var i in n){if(n.hasOwnProperty(i)){r[i]=n[i]}}}}return r}}function t(t){return{startTime:new TypeError("The starting time needs to be a number (seconds) or a string representation of the time, e.g. 10:00. Instead got: "+t),incorrectFormat:new Error("Provided time is not in the correct format. Expected HH:MM:SS / MM:SS / SS, got: "+t),eventFunctions:new TypeError("Ticker/finish requires a function, instead got: "+t),outputFormat:new Error("Incorrect outputFormat, expected a string: HH:MM:SS, MM:SS or SS. Instead got: "+t),separator:new TypeError("Expected separator to be a string, instead got: "+t)}}function r(r,e){switch(r){case"outputFormat":if(typeof e!=="string"){throw t(typeof e).outputFormat}if(e!=="HH:MM:SS"&&e!=="MM:SS"&&e!=="SS"){throw t(e).outputFormat}case"separator":if(typeof e!=="string"){throw t(typeof e).separator}}}function e(t){var e={outputFormat:"MM:SS",separator:":"};for(var n in t){r(n,t[n])}return Object.assign({},e,t)}function n(t){t=t.split(":");if(t.length===3&&(+t[0]<0||+t[0]>23||isNaN(+t[0])||(+t[1]<0||+t[1]>59||isNaN(+t[1]))||(+t[2]<0||+t[2]>59||isNaN(+t[2])))){return true}if(t.length===2&&(+t[0]<0||+t[0]>59||isNaN(+t[0])||(+t[1]<0||+t[1]>59||isNaN(+t[1])))){return true}if(t.length===1&&(+t[0]<0||+t[1]>59||isNaN(+t[0]))){return true}return false}function i(t){return t.split(":").map(function(t,r,e){if(e.length===1){return+t}if(e.length===2){if(r===0){return+t*60}return+t}if(e.length===3){if(r===0){return+t*60*60}if(r===1){return+t*60}return+t}}).reduce(function(t,r){return t+r},0)}function o(t){return t<10?"0"+t:""+t}function s(t,r){this.timer=null;this.events={};this.running=false;this.options=r;this.startTime=t;this.currentTime=t}s.prototype.on=function(t,r){if(!Array.isArray(this.events[t])){this.events[t]=[]}this.events[t].push(r)};s.prototype.emit=function(t){if(!this.events[t]||this.events[t].length===0){return}var r=[];for(var e=1,n=arguments.length;e<n;e++){r.push(arguments[e])}for(var i=0,o=this.events[t].length;i<o;i++){this.events[t][i].apply(this,r)}};s.prototype.start=function(){if(!this.running){this.running=true;if(this.startTime>0){this.timer=setInterval(this.countdown.bind(this),1e3)}else{this.timer=setInterval(this.stopwatch.bind(this),1e3)}}else{console.warn("Timer already running")}return this};s.prototype.pause=function(){this.clear();this.running=false;return this};s.prototype.stop=function(){this.clear();this.running=false;this.currentTime=this.startTime;return this};s.prototype.clear=function(){clearInterval(this.timer);return this};s.prototype.ticker=function(r){if(typeof r!=="function"){throw t(typeof r).eventFunctions}this.on("ticker",r);return this};s.prototype.finish=function(r){if(typeof r!=="function"){throw t(typeof r).eventFunctions}this.on("finish",r);return this};s.prototype.stopwatch=function(){this.currentTime+=1;this.emit("ticker",this.formatTime(),this.currentTime);return this};s.prototype.countdown=function(){this.currentTime-=1;this.emit("ticker",this.formatTime(),this.currentTime,this.startTime);if(this.currentTime<=0){this.emit("finish");this.stop()}return this};s.prototype.formatTime=function(){var t=this.currentTime,r=t/60;if(r>=1){var e=r/60;r=Math.floor(r);if(e>=1){e=Math.floor(e);return o(e)+this.options.separator+o(r-e*60)+this.options.separator+o(t-r*60)}return(this.options.outputFormat==="HH:MM:SS"?"00"+this.options.separator:"")+o(r)+this.options.separator+o(t-r*60)}return(this.options.outputFormat==="HH:MM:SS"?"00"+this.options.separator+"00"+this.options.separator:this.options.outputFormat==="MM:SS"?"00"+this.options.separator:"")+o(t)};s.prototype.getCurrentTime=function(){return this.currentTime};s.prototype.isRunning=function(){return this.running};function u(r,o){r=r||0;if(typeof r==="string"){if(n(r)){throw t(r).incorrectFormat}return new s(i(r),e(o))}if(typeof r!=="number"){throw t(typeof r).startTime}return new s(r,e(o))}window.Timr=u})();