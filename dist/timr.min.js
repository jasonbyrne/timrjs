/* TimrJS v0.4.0 | (c) 2016 Joe Smith | https://github.com/joesmith100/timrjs/blob/master/LICENSE*/
(function(t){"use strict";if(typeof Object.assign!="function"){Object.assign=function(t){if(t===undefined||t===null){throw new TypeError("Cannot convert undefined or null to object")}var r=Object(t);for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i!==undefined&&i!==null){for(var e in i){if(i.hasOwnProperty(e)){r[e]=i[e]}}}}return r}}var r=function(t){return{startTime:new TypeError("The starting time needs to be a number (seconds) or a string representation of the time, e.g. 10:00. Instead got: "+t),incorrectFormat:new Error("Provided time is not in the correct format. Expected HH:MM:SS / MM:SS / SS, got: "+t),eventFunctions:new TypeError("Ticker/finish requires a function, instead got: "+t),outputFormat:new Error("Incorrect outputFormat, expected a string: HH:MM:SS, MM:SS or SS. Instead got: "+t),separator:new TypeError("Expected separator to be a string, instead got: "+t)}},n=function(t,n){switch(t){case"outputFormat":if(typeof n!=="string"){throw r(typeof n).outputFormat}if(n!=="HH:MM:SS"&&n!=="MM:SS"&&n!=="SS"){throw r(n).outputFormat}case"separator":if(typeof n!=="string"){throw r(typeof n).separator}}},i=function(t){var r={outputFormat:"MM:SS",separator:":"};for(var i in t){n(i,t[i])}return Object.assign({},r,t)},e=function(t){t=t.split(":");if(t.length===3&&(+t[0]<0||+t[0]>23||isNaN(+t[0])||(+t[1]<0||+t[1]>59||isNaN(+t[1]))||(+t[2]<0||+t[2]>59||isNaN(+t[2])))){return true}if(t.length===2&&(+t[0]<0||+t[0]>59||isNaN(+t[0])||(+t[1]<0||+t[1]>59||isNaN(+t[1])))){return true}if(t.length===1&&(+t[0]<0||+t[1]>59||isNaN(+t[0]))){return true}return false},o=function(t){return t.split(":").map(function(t,r,n){if(n.length===1){return+t}if(n.length===2){if(r===0){return+t*60}return+t}if(n.length===3){if(r===0){return+t*60*60}if(r===1){return+t*60}return+t}}).reduce(function(t,r){return t+r},0)},s=function(t){return t<10?"0"+t:""+t},u=function(t,r){this.timer=null;this.events={};this.running=false;this.options=r;this.startTime=t;this.currentTime=t};u.prototype={constructor:u,on:function(t,r){if(!Array.isArray(this.events[t])){this.events[t]=[]}this.events[t].push(r)},emit:function(t){if(!this.events[t]||this.events[t].length===0){return}var r=[];for(var n=1,i=arguments.length;n<i;n++){r.push(arguments[n])}for(var e=0,o=this.events[t].length;e<o;e++){this.events[t][e].apply(this,r)}},start:function(){if(!this.running){this.running=true;if(this.startTime>0){this.timer=setInterval(this.countdown.bind(this),1e3)}else{this.timer=setInterval(this.stopwatch.bind(this),1e3)}}else{console.warn("Timer already running")}return this},pause:function(){this.clear();this.running=false;return this},stop:function(){this.clear();this.running=false;this.currentTime=this.startTime;return this},clear:function(){clearInterval(this.timer);return this},ticker:function(t){if(typeof t!=="function"){throw r(typeof t).eventFunctions}this.on("ticker",t);return this},finish:function(t){if(typeof t!=="function"){throw r(typeof t).eventFunctions}this.on("finish",t);return this},stopwatch:function(){this.currentTime+=1;this.emit("ticker",this.formatTime(),this.currentTime);return this},countdown:function(){this.currentTime-=1;this.emit("ticker",this.formatTime(),this.currentTime,this.startTime);if(this.currentTime<=0){this.emit("finish");this.stop()}return this},formatTime:function(){var t=this.currentTime,r=t/60;if(r>=1){var n=r/60;r=Math.floor(r);if(n>=1){n=Math.floor(n);return s(n)+this.options.separator+s(r-n*60)+this.options.separator+s(t-r*60)}return(this.options.outputFormat==="HH:MM:SS"?"00"+this.options.separator:"")+s(r)+this.options.separator+s(t-r*60)}return(this.options.outputFormat==="HH:MM:SS"?"00"+this.options.separator+"00"+this.options.separator:this.options.outputFormat==="MM:SS"?"00"+this.options.separator:"")+s(t)},getCurrentTime:function(){return this.currentTime},isRunning:function(){return this.running}};function a(t,n){t=t||0;if(typeof t==="string"){if(e(t)){throw r(t).incorrectFormat}return new u(o(t),i(n))}if(typeof t!=="number"){throw r(typeof t).startTime}return new u(t,i(n))}t.Timr=a})(window);