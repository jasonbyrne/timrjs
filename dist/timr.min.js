/* TimrJS v0.4.0 | (c) 2016 Joe Smith | https://github.com/joesmith100/timrjs/blob/master/LICENSE */
(function(t){"use strict";var r=function(t,n){return new r.init(t,n)},n=function(t,r){switch(t){case"outputFormat":if(typeof r!=="string"){throw new TypeError("Warning! outputFormat needs to be of type string, instead got: "+r)}if(r!=="HH:MM:SS"&&r!=="MM:SS"&&r!=="SS"){throw new Error("Warning! outputFormat only accepts the following: HH:MM:SS, MM:SS (default) and SS, instead got: "+r)}case"separator":if(typeof r!=="string"){throw new TypeError("Warning! separator needs to be of type string, instead got: "+r)}}},i=function(t){var r={outputFormat:"MM:SS",separator:":"};if(t){for(var i in t){n(i,t[i]);r[i]=t[i]}}return r},e=function(t){t=t.split(":");if(t.length===3&&(+t[0]<0||+t[0]>23||isNaN(+t[0])||(+t[1]<0||+t[1]>59||isNaN(+t[1]))||(+t[2]<0||+t[2]>59||isNaN(+t[2])))){return true}if(t.length===2&&(+t[0]<0||+t[0]>59||isNaN(+t[0])||(+t[1]<0||+t[1]>59||isNaN(+t[1])))){return true}if(t.length===1&&(+t[0]<0||+t[1]>59||isNaN(+t[0]))){return true}return false},o=function(t){if(e(t)){throw new Error("Warning! Provided time is not in the correct format. Expected time format (HH:MM:SS, MM:SS or SS), instead got: "+t)}return t.split(":").map(function(t,r,n){if(n.length===1){return+t}if(n.length===2){if(r===0){return+t*60}return+t}if(n.length===3){if(r===0){return+t*60*60}if(r===1){return+t*60}return+t}}).reduce(function(t,r){return t+r},0)},s=function(t){return t<10?"0"+t:""+t},u=function(t){t.currentTime-=1;t.emit("ticker",t.formatTime(),t.currentTime,t.startTime);if(t.currentTime<=0){t.emit("finish");t.stop()}},f=function(t){t.currentTime+=1;t.emit("ticker",t.formatTime(),t.currentTime)};r.prototype={constructor:r,on:function(t,r){if(!Array.isArray(this.events[t])){this.events[t]=[]}this.events[t].push(r)},emit:function(t){if(!this.events[t]||this.events[t].length===0){return}var r=[];for(var n=1,i=arguments.length;n<i;n++){r.push(arguments[n])}for(var e=0,o=this.events[t].length;e<o;e++){this.events[t][e].apply(this,r)}},start:function(){if(!this.running){this.running=true;if(this.startTime>0){this.timer=setInterval(u.bind(this,this),1e3)}else{this.timer=setInterval(f.bind(this,this),1e3)}}else{console.warn("Timer already running")}return this},pause:function(){this.clear();this.running=false;return this},stop:function(){this.clear();this.running=false;this.currentTime=this.startTime;return this},clear:function(){clearInterval(this.timer);return this},ticker:function(t){if(typeof t!=="function"){throw new TypeError("Warning! Ticker requires a function, instead got: "+typeof t)}this.on("ticker",t);return this},finish:function(t){if(typeof t!=="function"){throw new TypeError("Warning! Finish requires a function, instead got: "+typeof t)}this.on("finish",t);return this},formatTime:function(){var t=this.currentTime,r=t/60,n=this.options.outputFormat,i=this.options.separator;if(r>=1){var e=r/60;r=Math.floor(r);if(e>=1){e=Math.floor(e);return s(e)+i+s(r-e*60)+i+s(t-r*60)}return(n==="HH:MM:SS"?"00"+i:"")+s(r)+i+s(t-r*60)}return(n==="HH:MM:SS"?"00"+i+"00"+i:n==="MM:SS"?"00"+i:"")+s(t)},getCurrentTime:function(){return this.currentTime},isRunning:function(){return this.running}};r.init=function(t,r){if(typeof t==="string"){t=o(t)}else if(typeof t!=="number"){throw new TypeError("Warning! Expected starting time to be of type string or number, instead got: "+typeof t)}this.timer=null;this.events={};this.running=false;this.options=i(r);this.startTime=t;this.currentTime=t};r.init.prototype=r.prototype;t.Timr=r})(function(){try{return window}catch(t){return global}}());